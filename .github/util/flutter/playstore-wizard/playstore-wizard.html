<!DOCTYPE html>
<html lang="ko" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flutter Play Store CI/CD ì„¤ì • ë§ˆë²•ì‚¬</title>
    <!-- Pretendard í°íŠ¸ -->
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Pretendard Variable"', 'Pretendard', '-apple-system', 'BlinkMacSystemFont', 'system-ui', 'Roboto', 'sans-serif'],
                    },
                    colors: {
                        dark: {
                            bg: '#0f172a',
                            card: '#1e293b',
                            border: '#334155',
                            text: '#e2e8f0',
                            muted: '#94a3b8'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Pretendard ê¸°ë³¸ ì ìš© */
        * {
            font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
        }

        /* ì½”ë“œ ë¸”ë¡ì€ ëª¨ë…¸ìŠ¤í˜ì´ìŠ¤ ìœ ì§€ */
        code, pre, .font-mono, textarea {
            font-family: 'Consolas', 'Monaco', 'Menlo', monospace !important;
        }

        /* Tooltip Styles */
        .tooltip-container {
            position: relative;
            display: inline-flex;
            align-items: center;
        }
        .tooltip-trigger {
            cursor: help;
            margin-left: 6px;
        }
        .tooltip-content {
            position: absolute;
            bottom: calc(100% + 8px);
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            border: 1px solid #475569;
            color: #e2e8f0;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 13px;
            width: 280px;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            line-height: 1.5;
        }
        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-top-color: #475569;
        }
        .tooltip-container:hover .tooltip-content {
            opacity: 1;
            visibility: visible;
        }

        /* Code Block */
        .code-block {
            position: relative;
            background: #0f172a;
            border: 1px solid #334155;
            border-radius: 8px;
            overflow: hidden;
        }
        .code-block pre {
            padding: 16px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.5;
            color: #e2e8f0;
            margin: 0;
            white-space: pre-wrap;
            word-break: break-all;
        }

        /* File Upload */
        .file-upload {
            border: 2px dashed #475569;
            transition: all 0.3s;
        }
        .file-upload:hover {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }
        .file-upload.dragover {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.2);
        }
        .file-upload.has-file {
            border-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 min-h-screen">
    <div class="max-w-4xl mx-auto p-4 md:p-6">
        <!-- Header -->
        <header class="text-center py-8 mb-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl shadow-xl">
            <h1 class="text-2xl md:text-3xl font-bold text-white mb-2">
                Flutter Play Store CI/CD ì„¤ì • ë§ˆë²•ì‚¬
            </h1>
            <p class="text-blue-100 text-sm md:text-base">
                Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ìë™ ë°°í¬ë¥¼ ìœ„í•œ ë‹¨ê³„ë³„ ì„¤ì • ê°€ì´ë“œ
            </p>
        </header>

        <!-- Progress Steps -->
        <div class="flex justify-between mb-8 px-2">
            <div class="step-indicator flex flex-col items-center flex-1 relative" data-step="1">
                <div class="step-circle w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-bold text-sm z-10 shadow-lg">1</div>
                <span class="text-xs mt-2 text-slate-400 text-center hidden md:block">í”„ë¡œì íŠ¸ ë¶„ì„</span>
            </div>
            <div class="step-indicator flex flex-col items-center flex-1 relative" data-step="2">
                <div class="step-circle w-10 h-10 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center font-bold text-sm z-10">2</div>
                <span class="text-xs mt-2 text-slate-500 text-center hidden md:block">Keystore ìƒì„±</span>
            </div>
            <div class="step-indicator flex flex-col items-center flex-1 relative" data-step="3">
                <div class="step-circle w-10 h-10 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center font-bold text-sm z-10">3</div>
                <span class="text-xs mt-2 text-slate-500 text-center hidden md:block">ì„œëª… ì„¤ì •</span>
            </div>
            <div class="step-indicator flex flex-col items-center flex-1 relative" data-step="4">
                <div class="step-circle w-10 h-10 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center font-bold text-sm z-10">4</div>
                <span class="text-xs mt-2 text-slate-500 text-center hidden md:block">Service Account</span>
            </div>
            <div class="step-indicator flex flex-col items-center flex-1 relative" data-step="5">
                <div class="step-circle w-10 h-10 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center font-bold text-sm z-10">5</div>
                <span class="text-xs mt-2 text-slate-500 text-center hidden md:block">Fastlane</span>
            </div>
            <div class="step-indicator flex flex-col items-center flex-1 relative" data-step="6">
                <div class="step-circle w-10 h-10 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center font-bold text-sm z-10">6</div>
                <span class="text-xs mt-2 text-slate-500 text-center hidden md:block">.gitignore</span>
            </div>
            <div class="step-indicator flex flex-col items-center flex-1" data-step="7">
                <div class="step-circle w-10 h-10 rounded-full bg-slate-700 text-slate-400 flex items-center justify-center font-bold text-sm z-10">7</div>
                <span class="text-xs mt-2 text-slate-500 text-center hidden md:block">ì™„ë£Œ</span>
            </div>
        </div>

        <!-- Step 1: Project Analysis -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content fade-in" data-step="1">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-sm">1</span>
                í”„ë¡œì íŠ¸ ë¶„ì„
                <span class="tooltip-container">
                    <svg class="w-5 h-5 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip-content">
                        <strong>í”„ë¡œì íŠ¸ ë¶„ì„ì´ë€?</strong><br>
                        Flutter í”„ë¡œì íŠ¸ì˜ ì„¤ì • íŒŒì¼ë“¤ì„ ì½ì–´ì„œ Application ID, ë²„ì „ ì •ë³´, ê¸°ì¡´ ì„¤ì • ìƒíƒœ ë“±ì„ ìë™ìœ¼ë¡œ íŒŒì•…í•©ë‹ˆë‹¤.
                    </div>
                </span>
            </h2>

            <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-blue-300 mb-1">ì‚¬ìš© ë°©ë²•</p>
                        <p class="text-sm text-slate-300">
                            1. ì•„ë˜ì—ì„œ Flutter í”„ë¡œì íŠ¸ í´ë”ë¥¼ ì„ íƒí•˜ì„¸ìš”.<br>
                            2. ìƒì„±ëœ ëª…ë ¹ì–´ë¥¼ í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”.<br>
                            3. ì¶œë ¥ëœ JSONì„ ì•„ë˜ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>

            <!-- í”„ë¡œì íŠ¸ í´ë” ì„ íƒ -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    Step 1: Flutter í”„ë¡œì íŠ¸ í´ë” ì„ íƒ
                    <span class="tooltip-container">
                        <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="tooltip-content">
                            pubspec.yaml íŒŒì¼ì´ ìˆëŠ” Flutter í”„ë¡œì íŠ¸ì˜ ë£¨íŠ¸ í´ë”ë¥¼ ì„ íƒí•˜ì„¸ìš”.<br><br>
                            í´ë” ì„ íƒ í›„ ìë™ìœ¼ë¡œ cd ëª…ë ¹ì–´ê°€ ìƒì„±ë©ë‹ˆë‹¤.
                        </div>
                    </span>
                </label>
                <div class="flex gap-3">
                    <input type="text" id="projectPath" readonly
                        class="flex-1 bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm text-slate-300 cursor-pointer"
                        placeholder="í´ë”ë¥¼ ì„ íƒí•˜ì„¸ìš”..." onclick="selectProjectFolder()">
                    <button class="px-4 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium transition flex items-center gap-2" onclick="selectProjectFolder()">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
                        </svg>
                        í´ë” ì„ íƒ
                    </button>
                </div>
                <p class="text-xs text-slate-500 mt-2">
                    ğŸ’¡ ê²½ë¡œ í™•ì¸ ë°©ë²•: í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™ í›„ <code class="bg-slate-700 px-1.5 py-0.5 rounded">pwd</code> (Mac/Linux) ë˜ëŠ” <code class="bg-slate-700 px-1.5 py-0.5 rounded">(pwd).Path</code> (PowerShell) ì…ë ¥
                </p>
                <p class="text-xs text-slate-500 mt-1">
                    * ë”ë¸”í´ë¦­í•˜ì—¬ ì§ì ‘ ì…ë ¥í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>

            <!-- ìƒì„±ëœ ëª…ë ¹ì–´ -->
            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    Step 2: í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•  ëª…ë ¹ì–´
                </label>

                <div class="mb-4">
                    <p class="text-xs text-slate-400 mb-2">Mac / Linux / Git Bash:</p>
                    <div class="code-block">
                        <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                        <pre id="macCommand">cd /path/to/your/project && bash .github/util/flutter/android-playstore-setup-wizard/init.sh</pre>
                    </div>
                </div>

                <div>
                    <p class="text-xs text-slate-400 mb-2">Windows PowerShell:</p>
                    <div class="code-block">
                        <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                        <pre id="windowsCommand">cd "C:\path\to\your\project"; powershell -ExecutionPolicy Bypass -File .github\util\flutter/android-playstore-setup-wizard\init.ps1</pre>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    ìŠ¤í¬ë¦½íŠ¸ ì¶œë ¥ ê²°ê³¼ ë¶™ì—¬ë„£ê¸°:
                    <span class="tooltip-container">
                        <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="tooltip-content">
                            ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•˜ë©´ JSON í˜•ì‹ì˜ í”„ë¡œì íŠ¸ ì •ë³´ê°€ ì¶œë ¥ë©ë‹ˆë‹¤.<br><br>
                            ì˜ˆì‹œ:<br>
                            <code>{"applicationId": "com.example.app", ...}</code>
                        </div>
                    </span>
                </label>
                <textarea id="scriptOutput"
                    class="w-full bg-slate-900 border border-slate-600 rounded-lg p-4 text-sm font-mono text-slate-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition"
                    rows="5"
                    placeholder='{"applicationId": "com.example.app", "versionName": "1.0.0", ...}'></textarea>
            </div>

            <button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm font-medium transition" onclick="parseProjectInfo()">
                ë¶„ì„í•˜ê¸°
            </button>

            <div id="detectedInfo" class="mt-6 hidden">
                <h4 class="text-sm font-semibold text-slate-400 mb-3">ê°ì§€ëœ í”„ë¡œì íŠ¸ ì •ë³´:</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <div class="bg-slate-900 rounded-lg p-3">
                        <p class="text-xs text-slate-500 mb-1">Application ID</p>
                        <p id="detectedAppId" class="text-sm font-medium text-slate-200 break-all">-</p>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3">
                        <p class="text-xs text-slate-500 mb-1">ë²„ì „</p>
                        <p id="detectedVersion" class="text-sm font-medium text-slate-200">-</p>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3">
                        <p class="text-xs text-slate-500 mb-1">ë²„ì „ ì½”ë“œ</p>
                        <p id="detectedVersionCode" class="text-sm font-medium text-slate-200">-</p>
                    </div>
                    <div class="bg-slate-900 rounded-lg p-3">
                        <p class="text-xs text-slate-500 mb-1">Gradle íƒ€ì…</p>
                        <p id="detectedGradleType" class="text-sm font-medium text-slate-200">-</p>
                    </div>
                </div>
            </div>

            <div class="flex justify-end mt-8">
                <button class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition flex items-center gap-2" onclick="nextStep()">
                    ë‹¤ìŒ ë‹¨ê³„
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 2: Keystore Generation -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content hidden" data-step="2">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-sm">2</span>
                Release Keystore ìƒì„±
                <span class="tooltip-container">
                    <svg class="w-5 h-5 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip-content">
                        <strong>Keystoreë€?</strong><br>
                        Android ì•±ì— ë””ì§€í„¸ ì„œëª…ì„ í•˜ê¸° ìœ„í•œ ì•”í˜¸í™”ëœ íŒŒì¼ì…ë‹ˆë‹¤.
                        Play Storeì— ì•±ì„ ì—…ë¡œë“œí•˜ë ¤ë©´ ë°˜ë“œì‹œ ë™ì¼í•œ Keystoreë¡œ ì„œëª…í•´ì•¼ í•©ë‹ˆë‹¤.<br><br>
                        <span class="text-yellow-400">âš ï¸ ë¶„ì‹¤ ì‹œ ì•± ì—…ë°ì´íŠ¸ ë¶ˆê°€!</span>
                    </div>
                </span>
            </h2>

            <div class="bg-yellow-900/30 border border-yellow-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-yellow-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-yellow-300 mb-1">ì¤‘ìš”: Keystore ë°±ì—… í•„ìˆ˜!</p>
                        <p class="text-sm text-slate-300">
                            Keystore íŒŒì¼ì„ ë¶„ì‹¤í•˜ë©´ ì•±ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                            ìƒì„± í›„ ì•ˆì „í•œ ê³³ì— ë°˜ë“œì‹œ ë°±ì—…í•˜ì„¸ìš”. (Google Drive, USB ë“±)
                        </p>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-300">
                        Key Alias (í‚¤ ë³„ì¹­)
                        <span class="tooltip-container">
                            <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="tooltip-content">
                                Keystore ë‚´ë¶€ì—ì„œ íŠ¹ì • í‚¤ë¥¼ ì‹ë³„í•˜ëŠ” ì´ë¦„ì…ë‹ˆë‹¤.<br><br>
                                ì˜ˆ: <code>my-app-release-key</code><br><br>
                                ë³´í†µ ì•± ì´ë¦„ê³¼ ê´€ë ¨ëœ ì´ë¦„ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                            </div>
                        </span>
                    </label>
                    <input type="text" id="keyAlias"
                        class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition"
                        placeholder="ì˜ˆ: my-app-release-key">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-300">
                        Keystore ë¹„ë°€ë²ˆí˜¸
                        <span class="tooltip-container">
                            <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="tooltip-content">
                                Keystore íŒŒì¼ ìì²´ë¥¼ ë³´í˜¸í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.<br><br>
                                ìµœì†Œ 6ì ì´ìƒì˜ ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
                            </div>
                        </span>
                    </label>
                    <input type="password" id="storePassword"
                        class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition"
                        placeholder="ê°•ë ¥í•œ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-300">
                        Key ë¹„ë°€ë²ˆí˜¸
                        <span class="tooltip-container">
                            <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="tooltip-content">
                                Keystore ë‚´ì˜ ê°œë³„ í‚¤ë¥¼ ë³´í˜¸í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸ì…ë‹ˆë‹¤.<br><br>
                                Keystore ë¹„ë°€ë²ˆí˜¸ì™€ ë™ì¼í•˜ê²Œ ì„¤ì •í•´ë„ ë©ë‹ˆë‹¤.
                            </div>
                        </span>
                    </label>
                    <input type="password" id="keyPassword"
                        class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition"
                        placeholder="Keystore ë¹„ë°€ë²ˆí˜¸ì™€ ë™ì¼í•´ë„ ë¨">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-300">
                        ìœ íš¨ ê¸°ê°„ (ì¼)
                        <span class="tooltip-container">
                            <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="tooltip-content">
                                í‚¤ì˜ ìœ íš¨ ê¸°ê°„ì…ë‹ˆë‹¤. Googleì€ ìµœì†Œ 25ë…„(9125ì¼)ì„ ê¶Œì¥í•©ë‹ˆë‹¤.<br><br>
                                ê¸°ë³¸ê°’ 10000ì¼ì€ ì•½ 27ë…„ì…ë‹ˆë‹¤.
                            </div>
                        </span>
                    </label>
                    <input type="number" id="validityDays" value="10000"
                        class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition">
                </div>
            </div>

            <details class="mb-6">
                <summary class="cursor-pointer text-sm font-medium text-slate-400 hover:text-slate-300 transition">
                    ì¸ì¦ì„œ ì •ë³´ (ì„ íƒì‚¬í•­) â–¼
                </summary>
                <div class="grid md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-700">
                    <div>
                        <label class="block text-sm font-medium mb-2 text-slate-300">ì´ë¦„ (CN)</label>
                        <input type="text" id="certCN"
                            class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 outline-none"
                            placeholder="í™ê¸¸ë™">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 text-slate-300">ì¡°ì§ (O)</label>
                        <input type="text" id="certO"
                            class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 outline-none"
                            placeholder="My Company">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 text-slate-300">ë„ì‹œ (L)</label>
                        <input type="text" id="certL"
                            class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 outline-none"
                            placeholder="ì„œìš¸">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2 text-slate-300">êµ­ê°€ ì½”ë“œ (C)</label>
                        <input type="text" id="certC" maxlength="2"
                            class="w-full bg-slate-900 border border-slate-600 rounded-lg px-4 py-2.5 text-sm focus:border-blue-500 outline-none"
                            placeholder="KR">
                    </div>
                </div>
            </details>

            <button class="px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm font-medium transition mb-6" onclick="generateKeytoolCommand()">
                ëª…ë ¹ì–´ ìƒì„±
            </button>

            <div id="keytoolCommand" class="hidden mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    í„°ë¯¸ë„ì—ì„œ ì´ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”:
                </label>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="keytoolCommandText"></pre>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    ìƒì„±ëœ Keystore íŒŒì¼ ì—…ë¡œë“œ (.jks)
                    <span class="tooltip-container">
                        <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="tooltip-content">
                            ìœ„ ëª…ë ¹ì–´ë¡œ ìƒì„±ëœ <code>.jks</code> íŒŒì¼ì„ ì—¬ê¸°ì— ì—…ë¡œë“œí•˜ë©´ Base64ë¡œ ì¸ì½”ë”©ë©ë‹ˆë‹¤.<br><br>
                            Base64 ì¸ì½”ë”©ëœ ê°’ì„ GitHub Secretsì— ì €ì¥í•©ë‹ˆë‹¤.
                        </div>
                    </span>
                </label>
                <div class="file-upload rounded-lg p-8 text-center cursor-pointer" id="keystoreUpload" onclick="document.getElementById('keystoreFile').click()">
                    <input type="file" id="keystoreFile" accept=".jks,.keystore" class="hidden" onchange="handleKeystoreUpload(this)">
                    <svg class="w-12 h-12 mx-auto text-slate-500 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                    <p class="text-slate-400">í´ë¦­í•˜ê±°ë‚˜ .jks íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                </div>
            </div>

            <div id="keystoreBase64Result" class="hidden mb-6">
                <div class="bg-green-900/30 border border-green-700 rounded-lg p-4 mb-4">
                    <div class="flex gap-3">
                        <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <p class="font-semibold text-green-300">Keystore Base64 ì¸ì½”ë”© ì™„ë£Œ!</p>
                            <p class="text-sm text-slate-300 mt-1">
                                ì•„ë˜ ê°’ì„ <code class="bg-slate-700 px-1 rounded">RELEASE_KEYSTORE_BASE64</code> Secretìœ¼ë¡œ ë“±ë¡í•˜ì„¸ìš”.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="keystoreBase64" class="max-h-24 overflow-y-auto"></pre>
                </div>
            </div>

            <div class="flex justify-between mt-8">
                <button class="px-6 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition flex items-center gap-2" onclick="prevStep()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    ì´ì „
                </button>
                <button class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition flex items-center gap-2" onclick="nextStep()">
                    ë‹¤ìŒ ë‹¨ê³„
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 3: Signing Configuration -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content hidden" data-step="3">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-sm">3</span>
                Release ì„œëª… ì„¤ì •
                <span class="tooltip-container">
                    <svg class="w-5 h-5 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip-content">
                        <strong>ì„œëª… ì„¤ì •ì´ë€?</strong><br>
                        build.gradle.kts íŒŒì¼ì— Keystore ì •ë³´ë¥¼ ì—°ê²°í•˜ì—¬ Release ë¹Œë“œ ì‹œ ìë™ìœ¼ë¡œ ì„œëª…í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.
                    </div>
                </span>
            </h2>

            <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-blue-300 mb-1">ì„¤ì • íŒŒì¼ ìˆ˜ì • í•„ìš”</p>
                        <p class="text-sm text-slate-300">
                            <code class="bg-slate-700 px-1 rounded">android/app/build.gradle.kts</code> íŒŒì¼ì„ ì•„ë˜ ì½”ë“œë¡œ êµì²´í•˜ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    build.gradle.kts ì „ì²´ ì½”ë“œ:
                </label>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="signingConfigCode" class="max-h-96 overflow-y-auto"></pre>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    key.properties íŒŒì¼ ë‚´ìš©:
                    <span class="tooltip-container">
                        <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="tooltip-content">
                            Keystore ë¹„ë°€ë²ˆí˜¸ ë“± ë¯¼ê°í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.<br><br>
                            <code>android/key.properties</code> ê²½ë¡œì— ìƒì„±í•˜ì„¸ìš”.<br><br>
                            <span class="text-yellow-400">âš ï¸ ì ˆëŒ€ Gitì— ì»¤ë°‹í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤!</span>
                        </div>
                    </span>
                </label>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="keyPropertiesContent"></pre>
                </div>
            </div>

            <div class="bg-yellow-900/30 border border-yellow-700 rounded-lg p-4">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-yellow-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-yellow-300 mb-1">ë³´ì•ˆ ì£¼ì˜!</p>
                        <p class="text-sm text-slate-300">
                            <code class="bg-slate-700 px-1 rounded">android/key.properties</code>ë¥¼ ë°˜ë“œì‹œ <code>.gitignore</code>ì— ì¶”ê°€í•˜ì„¸ìš”!
                            Step 6ì—ì„œ ìì„¸íˆ ì•ˆë‚´í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>

            <div class="flex justify-between mt-8">
                <button class="px-6 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition flex items-center gap-2" onclick="prevStep()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    ì´ì „
                </button>
                <button class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition flex items-center gap-2" onclick="nextStep()">
                    ë‹¤ìŒ ë‹¨ê³„
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 4: Google Play Service Account -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content hidden" data-step="4">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-sm">4</span>
                Google Play Service Account ì„¤ì •
                <span class="tooltip-container">
                    <svg class="w-5 h-5 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip-content">
                        <strong>Service Accountë€?</strong><br>
                        GitHub Actionsê°€ Play Store APIì— ì ‘ê·¼í•˜ì—¬ ìë™ìœ¼ë¡œ ì•±ì„ ì—…ë¡œë“œí•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì¸ì¦ ê³„ì •ì…ë‹ˆë‹¤.<br><br>
                        ì‚¬ëŒì´ ì•„ë‹Œ í”„ë¡œê·¸ë¨ì´ ì‚¬ìš©í•˜ëŠ” íŠ¹ìˆ˜í•œ ê³„ì •ì…ë‹ˆë‹¤.
                    </div>
                </span>
            </h2>

            <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-blue-300 mb-1">ë‹¨ê³„ë³„ ê°€ì´ë“œ</p>
                        <p class="text-sm text-slate-300">
                            ì•„ë˜ ê°€ì´ë“œë¥¼ ë”°ë¼ Google Play Consoleê³¼ Google Cloud Consoleì—ì„œ ì„¤ì •ì„ ì™„ë£Œí•˜ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Guide Steps -->
            <div class="space-y-4 mb-6">
                <div class="bg-slate-900 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">1</span>
                        <div>
                            <p class="font-medium text-slate-200">Play Console ì ‘ì†</p>
                            <p class="text-sm text-slate-400 mt-1">
                                <a href="https://play.google.com/console" target="_blank" class="text-blue-400 hover:underline">
                                    https://play.google.com/console
                                </a>
                                â†’ ì„¤ì • (âš™ï¸) â†’ <strong>API ì•¡ì„¸ìŠ¤</strong>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">2</span>
                        <div>
                            <p class="font-medium text-slate-200">ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸°</p>
                            <p class="text-sm text-slate-400 mt-1">
                                "ì„œë¹„ìŠ¤ ê³„ì • ë§Œë“¤ê¸°" ë˜ëŠ” Google Cloud Console ë§í¬ í´ë¦­
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">3</span>
                        <div>
                            <p class="font-medium text-slate-200">Google Cloud Consoleì—ì„œ ì„¤ì •</p>
                            <p class="text-sm text-slate-400 mt-1">
                                IAM ë° ê´€ë¦¬ì â†’ ì„œë¹„ìŠ¤ ê³„ì • â†’ ë§Œë“¤ê¸°<br>
                                â€¢ ì´ë¦„: <code class="bg-slate-700 px-1 rounded">play-store-deploy</code><br>
                                â€¢ ì—­í• : ì„¤ì • ë¶ˆí•„ìš” (Play Consoleì—ì„œ ì„¤ì •)
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">4</span>
                        <div>
                            <p class="font-medium text-slate-200">JSON í‚¤ ìƒì„±</p>
                            <p class="text-sm text-slate-400 mt-1">
                                ìƒì„±ëœ ì„œë¹„ìŠ¤ ê³„ì • í´ë¦­ â†’ í‚¤ íƒ­ â†’ í‚¤ ì¶”ê°€ â†’ ìƒˆ í‚¤ ë§Œë“¤ê¸° â†’ <strong>JSON</strong> ì„ íƒ â†’ ë§Œë“¤ê¸°<br>
                                <span class="text-yellow-400">â†’ JSON íŒŒì¼ì´ ìë™ ë‹¤ìš´ë¡œë“œë©ë‹ˆë‹¤</span>
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-slate-900 rounded-lg p-4">
                    <div class="flex items-start gap-3">
                        <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">5</span>
                        <div>
                            <p class="font-medium text-slate-200">Play Consoleì—ì„œ ê¶Œí•œ ë¶€ì—¬</p>
                            <p class="text-sm text-slate-400 mt-1">
                                Play Console API ì•¡ì„¸ìŠ¤ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°<br>
                                â†’ ìƒì„±ëœ ì„œë¹„ìŠ¤ ê³„ì •ì— "ì•¡ì„¸ìŠ¤ ê¶Œí•œ ë¶€ì—¬"<br>
                                â†’ ê¶Œí•œ: <strong>ë¦´ë¦¬ìŠ¤ ê´€ë¦¬ì</strong> ë˜ëŠ” <strong>ë‚´ë¶€ í…ŒìŠ¤íŠ¸ íŠ¸ë™ ê´€ë¦¬</strong>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    Service Account JSON íŒŒì¼ ì—…ë¡œë“œ
                    <span class="tooltip-container">
                        <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <div class="tooltip-content">
                            Google Cloud Consoleì—ì„œ ë‹¤ìš´ë¡œë“œí•œ JSON íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.<br><br>
                            Base64ë¡œ ì¸ì½”ë”©ë˜ì–´ GitHub Secretsì— ì €ì¥ë©ë‹ˆë‹¤.
                        </div>
                    </span>
                </label>
                <div class="file-upload rounded-lg p-8 text-center cursor-pointer" id="serviceAccountUpload" onclick="document.getElementById('serviceAccountFile').click()">
                    <input type="file" id="serviceAccountFile" accept=".json" class="hidden" onchange="handleServiceAccountUpload(this)">
                    <svg class="w-12 h-12 mx-auto text-slate-500 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                    <p class="text-slate-400">í´ë¦­í•˜ê±°ë‚˜ JSON íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì„¸ìš”</p>
                </div>
            </div>

            <div id="serviceAccountBase64Result" class="hidden mb-6">
                <div class="bg-green-900/30 border border-green-700 rounded-lg p-4 mb-4">
                    <div class="flex gap-3">
                        <svg class="w-6 h-6 text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        <div>
                            <p class="font-semibold text-green-300">Service Account JSON ì¸ì½”ë”© ì™„ë£Œ!</p>
                            <p class="text-sm text-slate-300 mt-1">
                                ì•„ë˜ ê°’ì„ <code class="bg-slate-700 px-1 rounded">GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64</code> Secretìœ¼ë¡œ ë“±ë¡í•˜ì„¸ìš”.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="serviceAccountBase64" class="max-h-24 overflow-y-auto"></pre>
                </div>
            </div>

            <div class="flex justify-between mt-8">
                <button class="px-6 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition flex items-center gap-2" onclick="prevStep()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    ì´ì „
                </button>
                <button class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition flex items-center gap-2" onclick="nextStep()">
                    ë‹¤ìŒ ë‹¨ê³„
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 5: Fastlane Setup -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content hidden" data-step="5">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-sm">5</span>
                Fastlane ì„¤ì •
                <span class="tooltip-container">
                    <svg class="w-5 h-5 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip-content">
                        <strong>Fastlaneì´ë€?</strong><br>
                        ëª¨ë°”ì¼ ì•± ë°°í¬ë¥¼ ìë™í™”í•˜ëŠ” ë„êµ¬ì…ë‹ˆë‹¤. Play Store, App Store ì—…ë¡œë“œë¥¼ ëª…ë ¹ì–´ í•œ ì¤„ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </div>
                </span>
            </h2>

            <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-blue-300 mb-1">Fastfile ìƒì„±</p>
                        <p class="text-sm text-slate-300">
                            ì•„ë˜ ë‚´ìš©ì„ <code class="bg-slate-700 px-1 rounded">android/fastlane/Fastfile.playstore</code>ë¡œ ì €ì¥í•˜ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    Fastfile.playstore ë‚´ìš©:
                </label>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="fastfileContent" class="max-h-96 overflow-y-auto"></pre>
                </div>
            </div>

            <h4 class="text-sm font-semibold text-slate-400 mb-4">ì¶”ê°€ íŒŒì¼ (ì„ íƒì‚¬í•­)</h4>

            <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-300">
                        google-services.json
                        <span class="tooltip-container">
                            <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="tooltip-content">
                                Firebaseë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í•„ìš”í•©ë‹ˆë‹¤.<br>
                                Firebase Consoleì—ì„œ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </div>
                        </span>
                    </label>
                    <div class="file-upload rounded-lg p-4 text-center cursor-pointer" onclick="document.getElementById('googleServicesFile').click()">
                        <input type="file" id="googleServicesFile" accept=".json" class="hidden" onchange="handleGoogleServicesUpload(this)">
                        <p class="text-sm text-slate-400">Firebase ì‚¬ìš© ì‹œ ì—…ë¡œë“œ</p>
                    </div>
                    <div id="googleServicesResult" class="hidden mt-2 text-sm text-green-400">âœ“ ì—…ë¡œë“œ ì™„ë£Œ</div>
                </div>

                <div>
                    <label class="block text-sm font-medium mb-2 text-slate-300">
                        .env íŒŒì¼ ë‚´ìš©
                        <span class="tooltip-container">
                            <svg class="w-4 h-4 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <div class="tooltip-content">
                                ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ë³€ìˆ˜ë“¤ì…ë‹ˆë‹¤.<br>
                                API í‚¤, URL ë“±ì„ ì—¬ê¸°ì— ì…ë ¥í•©ë‹ˆë‹¤.
                            </div>
                        </span>
                    </label>
                    <textarea id="envFileContent"
                        class="w-full bg-slate-900 border border-slate-600 rounded-lg p-3 text-sm font-mono text-slate-300 focus:border-blue-500 outline-none"
                        rows="4"
                        placeholder="API_KEY=your_api_key&#10;BASE_URL=https://api.example.com"></textarea>
                </div>
            </div>

            <div class="flex justify-between mt-8">
                <button class="px-6 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition flex items-center gap-2" onclick="prevStep()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    ì´ì „
                </button>
                <button class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition flex items-center gap-2" onclick="nextStep()">
                    ë‹¤ìŒ ë‹¨ê³„
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 6: .gitignore Update -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content hidden" data-step="6">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-sm">6</span>
                .gitignore ì—…ë°ì´íŠ¸
                <span class="tooltip-container">
                    <svg class="w-5 h-5 text-slate-400 tooltip-trigger" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip-content">
                        <strong>.gitignoreë€?</strong><br>
                        Gitì´ ì¶”ì í•˜ì§€ ì•Šì„ íŒŒì¼ë“¤ì„ ì§€ì •í•˜ëŠ” íŒŒì¼ì…ë‹ˆë‹¤.<br><br>
                        ë¯¼ê°í•œ ì •ë³´ê°€ ë‹´ê¸´ íŒŒì¼ë“¤ì´ GitHubì— ì˜¬ë¼ê°€ì§€ ì•Šë„ë¡ ë°˜ë“œì‹œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤!
                    </div>
                </span>
            </h2>

            <div class="bg-red-900/30 border border-red-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-red-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-red-300 mb-1">ë³´ì•ˆ ê²½ê³ : ì´ ë‹¨ê³„ë¥¼ ë°˜ë“œì‹œ ì™„ë£Œí•˜ì„¸ìš”!</p>
                        <p class="text-sm text-slate-300">
                            Keystore íŒŒì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ê°€ GitHubì— ì—…ë¡œë“œë˜ë©´ ì•± ë³´ì•ˆì´ ì‹¬ê°í•˜ê²Œ ìœ„í˜‘ë°›ìŠµë‹ˆë‹¤.<br>
                            ì•„ë˜ ë‚´ìš©ì„ <code class="bg-slate-700 px-1 rounded">.gitignore</code>ì— ì¶”ê°€í•˜ì„¸ìš”.
                        </p>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <label class="block text-sm font-medium mb-2 text-slate-300">
                    .gitignoreì— ì¶”ê°€í•  ë‚´ìš©:
                </label>
                <div class="code-block">
                    <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                    <pre id="gitignoreContent"># ==============================================
# Play Store CI/CD - ë¯¼ê°í•œ íŒŒì¼ (ì ˆëŒ€ ì»¤ë°‹ ê¸ˆì§€!)
# ==============================================

# Keystore íŒŒì¼ ë° ë¹„ë°€ë²ˆí˜¸
android/key.properties
android/app/keystore/
*.jks
*.keystore

# Service Account JSON (ë¡œì»¬ í…ŒìŠ¤íŠ¸ìš©)
**/service-account*.json

# í™˜ê²½ ë³€ìˆ˜ íŒŒì¼
.env
.env.local
.env.*.local

# Firebase ì„¤ì • (ì„ íƒ - ê³µê°œí•´ë„ ë˜ì§€ë§Œ ê¶Œì¥í•˜ì§€ ì•ŠìŒ)
# android/app/google-services.json
# ios/Runner/GoogleService-Info.plist</pre>
                </div>
            </div>

            <div class="bg-slate-900 rounded-lg p-4 mb-6">
                <h4 class="font-medium text-slate-200 mb-3">ì²´í¬ë¦¬ìŠ¤íŠ¸</h4>
                <div class="space-y-2">
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="checkbox" id="check1" class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-blue-600 focus:ring-blue-500">
                        <span class="text-sm text-slate-300">.gitignoreì— ìœ„ ë‚´ìš©ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="checkbox" id="check2" class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-blue-600 focus:ring-blue-500">
                        <span class="text-sm text-slate-300">key.properties íŒŒì¼ì´ Gitì— ì¶”ì ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í–ˆìŠµë‹ˆë‹¤</span>
                    </label>
                    <label class="flex items-center gap-3 cursor-pointer">
                        <input type="checkbox" id="check3" class="w-5 h-5 rounded bg-slate-700 border-slate-600 text-blue-600 focus:ring-blue-500">
                        <span class="text-sm text-slate-300">keystore í´ë”ê°€ Gitì— ì¶”ì ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í–ˆìŠµë‹ˆë‹¤</span>
                    </label>
                </div>
            </div>

            <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-blue-300 mb-1">Git ìƒíƒœ í™•ì¸ ëª…ë ¹ì–´</p>
                        <p class="text-sm text-slate-300">
                            ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë¯¼ê°í•œ íŒŒì¼ì´ ì¶”ì ë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:
                        </p>
                    </div>
                </div>
            </div>

            <div class="code-block mb-6">
                <button class="copy-btn absolute top-2 right-2 px-3 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition" onclick="copyCode(this)">ë³µì‚¬</button>
                <pre># ì¶”ì  ìƒíƒœ í™•ì¸
git status

# key.propertiesê°€ ëª©ë¡ì— ì—†ì–´ì•¼ í•¨!
# ë§Œì•½ ìˆë‹¤ë©´:
git rm --cached android/key.properties
git rm --cached -r android/app/keystore/</pre>
            </div>

            <div class="flex justify-between mt-8">
                <button class="px-6 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition flex items-center gap-2" onclick="prevStep()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    ì´ì „
                </button>
                <button class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition flex items-center gap-2" onclick="generateFinalResult()">
                    ìµœì¢… ê²°ê³¼ ë³´ê¸°
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 7: Final Result -->
        <div class="card bg-slate-800 rounded-xl shadow-xl p-6 mb-6 step-content hidden" data-step="7">
            <h2 class="text-xl font-bold mb-6 flex items-center gap-3">
                <span class="w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center text-sm">âœ“</span>
                ì„¤ì • ì™„ë£Œ!
            </h2>

            <div class="bg-green-900/30 border border-green-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-green-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-green-300 mb-1">ëª¨ë“  ì„¤ì •ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                        <p class="text-sm text-slate-300">
                            ì•„ë˜ GitHub Secretsë¥¼ ì €ì¥ì†Œì— ë“±ë¡í•˜ë©´ CI/CDê°€ ì‘ë™í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                </div>
            </div>

            <h3 class="text-lg font-semibold mb-4">GitHub Secrets ë“±ë¡ ëª©ë¡</h3>

            <div class="bg-slate-900 rounded-lg overflow-hidden mb-6">
                <table class="w-full text-sm">
                    <thead class="bg-slate-700">
                        <tr>
                            <th class="px-4 py-3 text-left font-medium text-slate-300">Secret ì´ë¦„</th>
                            <th class="px-4 py-3 text-left font-medium text-slate-300">ìƒíƒœ</th>
                            <th class="px-4 py-3 text-right font-medium text-slate-300">ë³µì‚¬</th>
                        </tr>
                    </thead>
                    <tbody id="secretsTableBody" class="divide-y divide-slate-700">
                        <!-- Dynamically generated -->
                    </tbody>
                </table>
            </div>

            <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-6">
                <div class="flex gap-3">
                    <svg class="w-6 h-6 text-blue-400 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="font-semibold text-blue-300 mb-1">GitHub Secrets ë“±ë¡ ë°©ë²•</p>
                        <p class="text-sm text-slate-300">
                            GitHub ì €ì¥ì†Œ â†’ Settings â†’ Secrets and variables â†’ Actions â†’ New repository secret
                        </p>
                    </div>
                </div>
            </div>

            <h3 class="text-lg font-semibold mb-4">ë‹¤ìŒ ë‹¨ê³„</h3>

            <div class="space-y-3 mb-6">
                <div class="bg-slate-900 rounded-lg p-4 flex items-start gap-3">
                    <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">1</span>
                    <div>
                        <p class="font-medium text-slate-200">GitHub Secrets ë“±ë¡</p>
                        <p class="text-sm text-slate-400 mt-1">ìœ„ ëª©ë¡ì˜ ëª¨ë“  Secretì„ GitHubì— ë“±ë¡í•˜ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="bg-slate-900 rounded-lg p-4 flex items-start gap-3">
                    <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">2</span>
                    <div>
                        <p class="font-medium text-slate-200">Play Consoleì—ì„œ ì²« ë²ˆì§¸ AAB ìˆ˜ë™ ì—…ë¡œë“œ</p>
                        <p class="text-sm text-slate-400 mt-1">CI/CD ì´ì „ì— Play Consoleì—ì„œ ì•± ì •ë³´(ìŠ¤í¬ë¦°ìƒ·, ì„¤ëª… ë“±)ë¥¼ ë¨¼ì € ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
                <div class="bg-slate-900 rounded-lg p-4 flex items-start gap-3">
                    <span class="w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0">3</span>
                    <div>
                        <p class="font-medium text-slate-200">deploy ë¸Œëœì¹˜ë¡œ í‘¸ì‹œ</p>
                        <p class="text-sm text-slate-400 mt-1"><code class="bg-slate-700 px-1 rounded">deploy</code> ë¸Œëœì¹˜ì— ì½”ë“œë¥¼ í‘¸ì‹œí•˜ë©´ ìë™ìœ¼ë¡œ CI/CDê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div class="flex justify-between mt-8">
                <button class="px-6 py-2.5 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium transition flex items-center gap-2" onclick="prevStep()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    ì´ì „
                </button>
                <button class="px-6 py-2.5 bg-green-600 hover:bg-green-700 rounded-lg font-medium transition flex items-center gap-2" onclick="downloadConfig()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                    ì„¤ì • JSON ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
    </div>

    <script>
        // Global State
        let currentStep = 1;
        let projectInfo = {};
        let secrets = {};

        // Project Folder Selection
        async function selectProjectFolder() {
            const projectPathInput = document.getElementById('projectPath');
            const macCommand = document.getElementById('macCommand');
            const windowsCommand = document.getElementById('windowsCommand');

            // Try using File System Access API (Chrome/Edge)
            if ('showDirectoryPicker' in window) {
                try {
                    const dirHandle = await window.showDirectoryPicker();
                    const folderName = dirHandle.name;

                    // Since we can't get the full path due to security restrictions,
                    // show the folder name and provide instructions
                    projectPathInput.value = folderName + ' (ì„ íƒë¨ - ì „ì²´ ê²½ë¡œëŠ” í„°ë¯¸ë„ì—ì„œ í™•ì¸)';

                    // Update commands with a note
                    macCommand.textContent = `# ì„ íƒí•œ í´ë”(${folderName})ì—ì„œ ì‹¤í–‰:\nbash .github/util/flutter/android-playstore-setup-wizard/init.sh`;
                    windowsCommand.textContent = `# ì„ íƒí•œ í´ë”(${folderName})ì—ì„œ ì‹¤í–‰:\npowershell -ExecutionPolicy Bypass -File .github\\util\\flutter/android-playstore-setup-wizard\\init.ps1`;

                    return;
                } catch (err) {
                    // User cancelled or API not supported
                    if (err.name !== 'AbortError') {
                        console.log('Directory picker failed:', err);
                    }
                }
            }

            // Fallback: prompt for manual input
            const path = prompt(
                'í”„ë¡œì íŠ¸ ê²½ë¡œë¥¼ ì…ë ¥í•˜ì„¸ìš”.\n\n' +
                'ì˜ˆì‹œ:\n' +
                'â€¢ Mac/Linux: /Users/username/projects/my-flutter-app\n' +
                'â€¢ Windows: C:\\Users\\username\\projects\\my-flutter-app\n\n' +
                'í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™ í›„ pwd(Mac/Linux) ë˜ëŠ” pwd.Path(PowerShell)ë¥¼ ì…ë ¥í•˜ë©´ ê²½ë¡œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
            );

            if (path && path.trim()) {
                updateProjectPath(path.trim());
            }
        }

        function updateProjectPath(path) {
            const projectPathInput = document.getElementById('projectPath');
            const macCommand = document.getElementById('macCommand');
            const windowsCommand = document.getElementById('windowsCommand');

            projectPathInput.value = path;

            // Detect OS type from path format
            const isWindowsPath = path.includes('\\') || /^[A-Za-z]:/.test(path);

            if (isWindowsPath) {
                // Convert to proper format for each OS
                const winPath = path.replace(/\//g, '\\');
                const unixPath = path.replace(/\\/g, '/').replace(/^([A-Za-z]):/, (_, drive) => '/' + drive.toLowerCase());

                macCommand.textContent = `cd "${unixPath}" && bash .github/util/flutter/android-playstore-setup-wizard/init.sh`;
                windowsCommand.textContent = `cd "${winPath}"; powershell -ExecutionPolicy Bypass -File .github\\util\\flutter/android-playstore-setup-wizard\\init.ps1`;
            } else {
                // Unix-style path
                const winPath = path.replace(/\//g, '\\');

                macCommand.textContent = `cd "${path}" && bash .github/util/flutter/android-playstore-setup-wizard/init.sh`;
                windowsCommand.textContent = `cd "${winPath}"; powershell -ExecutionPolicy Bypass -File .github\\util\\flutter/android-playstore-setup-wizard\\init.ps1`;
            }
        }

        // Allow manual editing of project path input
        document.addEventListener('DOMContentLoaded', function() {
            const projectPathInput = document.getElementById('projectPath');
            if (projectPathInput) {
                // Make it editable on double-click
                projectPathInput.addEventListener('dblclick', function() {
                    this.readOnly = false;
                    this.classList.add('border-blue-500');
                    this.focus();
                });

                projectPathInput.addEventListener('blur', function() {
                    this.readOnly = true;
                    this.classList.remove('border-blue-500');
                    if (this.value.trim()) {
                        updateProjectPath(this.value.trim());
                    }
                });

                projectPathInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        this.blur();
                    }
                });
            }
        });

        // Step Navigation
        function updateStepUI() {
            document.querySelectorAll('.step-content').forEach(el => {
                el.classList.add('hidden');
                el.classList.remove('fade-in');
                if (parseInt(el.dataset.step) === currentStep) {
                    el.classList.remove('hidden');
                    el.classList.add('fade-in');
                }
            });

            document.querySelectorAll('.step-indicator').forEach(el => {
                const step = parseInt(el.dataset.step);
                const circle = el.querySelector('.step-circle');
                const label = el.querySelector('span:last-child');

                circle.classList.remove('bg-blue-600', 'bg-green-600', 'bg-slate-700');
                circle.classList.remove('text-white', 'text-slate-400');

                if (step === currentStep) {
                    circle.classList.add('bg-blue-600', 'text-white');
                    if (label) label.classList.replace('text-slate-500', 'text-slate-300');
                } else if (step < currentStep) {
                    circle.classList.add('bg-green-600', 'text-white');
                    circle.innerHTML = 'âœ“';
                } else {
                    circle.classList.add('bg-slate-700', 'text-slate-400');
                    circle.innerHTML = step;
                }
            });

            // Generate content for each step
            if (currentStep === 3) generateSigningConfig();
            if (currentStep === 5) generateFastfileContent();
        }

        function nextStep() {
            if (currentStep < 7) {
                currentStep++;
                updateStepUI();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepUI();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Step 1: Parse Project Info
        function parseProjectInfo() {
            const output = document.getElementById('scriptOutput').value.trim();

            if (!output) {
                // Manual entry fallback
                projectInfo = {
                    applicationId: 'com.example.app',
                    versionName: '1.0.0',
                    versionCode: 1,
                    gradleType: 'kts'
                };
            } else {
                try {
                    projectInfo = JSON.parse(output);
                } catch (e) {
                    alert('JSON íŒŒì‹± ì‹¤íŒ¨. í˜•ì‹ì„ í™•ì¸í•´ì£¼ì„¸ìš”.\n\nì˜ˆì‹œ:\n{"applicationId": "com.example.app", "versionName": "1.0.0", "versionCode": 1, "gradleType": "kts"}');
                    return;
                }
            }

            document.getElementById('detectedAppId').textContent = projectInfo.applicationId || '-';
            document.getElementById('detectedVersion').textContent = projectInfo.versionName || '-';
            document.getElementById('detectedVersionCode').textContent = projectInfo.versionCode || '-';
            document.getElementById('detectedGradleType').textContent = projectInfo.gradleType || '-';
            document.getElementById('detectedInfo').classList.remove('hidden');

            // Auto-generate key alias
            if (projectInfo.applicationId) {
                const suggestedAlias = projectInfo.applicationId.split('.').pop() + '-release-key';
                document.getElementById('keyAlias').value = suggestedAlias;
            }
        }

        // Step 2: Keystore
        function generateKeytoolCommand() {
            const alias = document.getElementById('keyAlias').value || 'release-key';
            const storePass = document.getElementById('storePassword').value || 'changeit';
            const keyPass = document.getElementById('keyPassword').value || storePass;
            const validity = document.getElementById('validityDays').value || '10000';

            const cn = document.getElementById('certCN').value || 'Unknown';
            const o = document.getElementById('certO').value || 'Unknown';
            const l = document.getElementById('certL').value || 'Unknown';
            const c = document.getElementById('certC').value || 'KR';

            secrets.RELEASE_KEY_ALIAS = alias;
            secrets.RELEASE_KEYSTORE_PASSWORD = storePass;
            secrets.RELEASE_KEY_PASSWORD = keyPass;

            const dname = `CN=${cn}, O=${o}, L=${l}, C=${c}`;

            const command = `keytool -genkey -v \\
  -keystore release-key.jks \\
  -keyalg RSA \\
  -keysize 2048 \\
  -validity ${validity} \\
  -alias ${alias} \\
  -storepass "${storePass}" \\
  -keypass "${keyPass}" \\
  -dname "${dname}"`;

            document.getElementById('keytoolCommandText').textContent = command;
            document.getElementById('keytoolCommand').classList.remove('hidden');
        }

        function handleKeystoreUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64 = e.target.result.split(',')[1];
                    secrets.RELEASE_KEYSTORE_BASE64 = base64;

                    document.getElementById('keystoreBase64').textContent = base64;
                    document.getElementById('keystoreBase64Result').classList.remove('hidden');
                    document.getElementById('keystoreUpload').classList.add('has-file');
                    document.getElementById('keystoreUpload').querySelector('p').textContent = `${file.name} (ì—…ë¡œë“œ ì™„ë£Œ)`;
                };
                reader.readAsDataURL(file);
            }
        }

        // Step 3: Signing Config
        function generateSigningConfig() {
            const alias = secrets.RELEASE_KEY_ALIAS || 'release-key';
            const appId = projectInfo.applicationId || 'com.example.app';

            const signingCode = `import java.util.Properties
import java.io.FileInputStream

plugins {
    id("com.android.application")
    id("kotlin-android")
    id("dev.flutter.flutter-gradle-plugin")
}

// key.properties íŒŒì¼ ë¡œë“œ
val keystorePropertiesFile = rootProject.file("key.properties")
val keystoreProperties = Properties()
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(FileInputStream(keystorePropertiesFile))
}

android {
    namespace = "${appId}"
    compileSdk = flutter.compileSdkVersion
    ndkVersion = flutter.ndkVersion

    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
    }

    kotlinOptions {
        jvmTarget = JavaVersion.VERSION_11.toString()
    }

    // ì„œëª… ì„¤ì •
    signingConfigs {
        create("release") {
            keyAlias = keystoreProperties["keyAlias"] as String? ?: ""
            keyPassword = keystoreProperties["keyPassword"] as String? ?: ""
            storeFile = keystoreProperties["storeFile"]?.let { file(it) }
            storePassword = keystoreProperties["storePassword"] as String? ?: ""
        }
    }

    defaultConfig {
        applicationId = "${appId}"
        minSdk = flutter.minSdkVersion
        targetSdk = flutter.targetSdkVersion
        versionCode = flutter.versionCode
        versionName = flutter.versionName
    }

    buildTypes {
        release {
            signingConfig = signingConfigs.getByName("release")
            isMinifyEnabled = true
            isShrinkResources = true
            proguardFiles(
                getDefaultProguardFile("proguard-android-optimize.txt"),
                "proguard-rules.pro"
            )
        }
    }
}

flutter {
    source = "../.."
}`;

            const keyProperties = `storeFile=keystore/key.jks
storePassword=${secrets.RELEASE_KEYSTORE_PASSWORD || 'YOUR_STORE_PASSWORD'}
keyAlias=${alias}
keyPassword=${secrets.RELEASE_KEY_PASSWORD || 'YOUR_KEY_PASSWORD'}`;

            document.getElementById('signingConfigCode').textContent = signingCode;
            document.getElementById('keyPropertiesContent').textContent = keyProperties;
        }

        // Step 4: Service Account
        function handleServiceAccountUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64 = btoa(e.target.result);
                    secrets.GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64 = base64;

                    document.getElementById('serviceAccountBase64').textContent = base64;
                    document.getElementById('serviceAccountBase64Result').classList.remove('hidden');
                    document.getElementById('serviceAccountUpload').classList.add('has-file');
                    document.getElementById('serviceAccountUpload').querySelector('p').textContent = `${file.name} (ì—…ë¡œë“œ ì™„ë£Œ)`;
                };
                reader.readAsText(file);
            }
        }

        // Step 5: Fastlane
        function generateFastfileContent() {
            const appId = projectInfo.applicationId || 'com.example.app';

            const fastfile = `# Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ë°°í¬ìš© Fastfile
# ê²½ë¡œ: android/fastlane/Fastfile.playstore

default_platform(:android)

platform :android do
  desc "Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ë¡œ ë°°í¬"
  lane :deploy_internal do
    # í™˜ê²½ ë³€ìˆ˜
    aab_path = ENV["AAB_PATH"] || "../build/app/outputs/bundle/release/app-release.aab"
    json_key = ENV["GOOGLE_PLAY_JSON_KEY"] || "~/.config/gcloud/service-account.json"

    puts "========================================="
    puts "Play Store ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ë°°í¬ ì‹œì‘"
    puts "========================================="
    puts "AAB ê²½ë¡œ: #{aab_path}"
    puts "Service Account: #{json_key}"

    # AAB íŒŒì¼ í™•ì¸
    unless File.exist?(aab_path)
      UI.user_error!("AAB íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: #{aab_path}")
    end

    # Service Account í™•ì¸
    unless File.exist?(json_key)
      UI.user_error!("Service Account JSONì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: #{json_key}")
    end

    # Play Store ì—…ë¡œë“œ
    upload_to_play_store(
      package_name: "${appId}",
      track: "internal",
      aab: aab_path,
      json_key: json_key,
      skip_upload_metadata: true,
      skip_upload_images: true,
      skip_upload_screenshots: true,
      release_status: "completed"
    )

    puts ""
    puts "========================================="
    puts "ë‚´ë¶€ í…ŒìŠ¤íŠ¸ ë°°í¬ ì„±ê³µ!"
    puts "========================================="
  end

  desc "Service Account JSON ê²€ì¦"
  lane :validate do
    json_key = ENV["GOOGLE_PLAY_JSON_KEY"] || "~/.config/gcloud/service-account.json"

    validate_play_store_json_key(
      json_key: json_key
    )

    puts "Service Account ê²€ì¦ ì„±ê³µ!"
  end
end`;

            document.getElementById('fastfileContent').textContent = fastfile;
        }

        function handleGoogleServicesUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    secrets.GOOGLE_SERVICES_JSON = e.target.result;
                    document.getElementById('googleServicesResult').classList.remove('hidden');
                };
                reader.readAsText(file);
            }
        }

        // Step 7: Final Result
        function generateFinalResult() {
            const envContent = document.getElementById('envFileContent').value;
            if (envContent) {
                secrets.ENV_FILE = envContent;
            }

            currentStep = 7;
            updateStepUI();

            const tbody = document.getElementById('secretsTableBody');
            tbody.innerHTML = '';

            const secretsList = [
                { name: 'RELEASE_KEYSTORE_BASE64', value: secrets.RELEASE_KEYSTORE_BASE64, required: true, desc: 'Keystore íŒŒì¼ (Base64)' },
                { name: 'RELEASE_KEYSTORE_PASSWORD', value: secrets.RELEASE_KEYSTORE_PASSWORD, required: true, desc: 'Keystore ë¹„ë°€ë²ˆí˜¸' },
                { name: 'RELEASE_KEY_ALIAS', value: secrets.RELEASE_KEY_ALIAS, required: true, desc: 'í‚¤ ë³„ì¹­' },
                { name: 'RELEASE_KEY_PASSWORD', value: secrets.RELEASE_KEY_PASSWORD, required: true, desc: 'í‚¤ ë¹„ë°€ë²ˆí˜¸' },
                { name: 'GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64', value: secrets.GOOGLE_PLAY_SERVICE_ACCOUNT_JSON_BASE64, required: true, desc: 'Service Account (Base64)' },
                { name: 'GOOGLE_SERVICES_JSON', value: secrets.GOOGLE_SERVICES_JSON, required: false, desc: 'Firebase ì„¤ì •' },
                { name: 'ENV_FILE', value: secrets.ENV_FILE, required: false, desc: 'í™˜ê²½ ë³€ìˆ˜' }
            ];

            secretsList.forEach(secret => {
                if (secret.value || secret.required) {
                    const tr = document.createElement('tr');
                    const hasValue = !!secret.value;

                    tr.innerHTML = `
                        <td class="px-4 py-3">
                            <code class="text-blue-400">${secret.name}</code>
                            <p class="text-xs text-slate-500 mt-1">${secret.desc}</p>
                        </td>
                        <td class="px-4 py-3">
                            <span class="${hasValue ? 'text-green-400' : 'text-red-400'}">
                                ${hasValue ? 'âœ“ ì„¤ì •ë¨' : 'âœ— ë¯¸ì„¤ì •'}
                            </span>
                        </td>
                        <td class="px-4 py-3 text-right">
                            <button
                                class="px-3 py-1 ${hasValue ? 'bg-blue-600 hover:bg-blue-700' : 'bg-slate-700 cursor-not-allowed'} rounded text-xs transition"
                                onclick="copySecret('${secret.name}')"
                                ${!hasValue ? 'disabled' : ''}>
                                ë³µì‚¬
                            </button>
                        </td>
                    `;
                    tbody.appendChild(tr);
                }
            });
        }

        function copySecret(name) {
            if (secrets[name]) {
                navigator.clipboard.writeText(secrets[name]);
                alert(`${name} ë³µì‚¬ ì™„ë£Œ!`);
            }
        }

        function copyCode(btn) {
            const pre = btn.parentElement.querySelector('pre');
            navigator.clipboard.writeText(pre.textContent);
            const originalText = btn.textContent;
            btn.textContent = 'ë³µì‚¬ë¨!';
            btn.classList.add('bg-green-600');
            setTimeout(() => {
                btn.textContent = originalText;
                btn.classList.remove('bg-green-600');
            }, 2000);
        }

        function downloadConfig() {
            const config = {
                projectInfo,
                generatedAt: new Date().toISOString(),
                secrets: Object.keys(secrets).reduce((acc, key) => {
                    acc[key] = secrets[key] ? '[ì„¤ì •ë¨]' : null;
                    return acc;
                }, {})
            };

            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'playstore-cicd-config.json';
            a.click();
        }

        // Drag and Drop
        document.querySelectorAll('.file-upload').forEach(el => {
            el.addEventListener('dragover', e => {
                e.preventDefault();
                el.classList.add('dragover');
            });
            el.addEventListener('dragleave', () => {
                el.classList.remove('dragover');
            });
            el.addEventListener('drop', e => {
                e.preventDefault();
                el.classList.remove('dragover');
                const input = el.querySelector('input');
                if (input && e.dataTransfer.files.length > 0) {
                    input.files = e.dataTransfer.files;
                    input.dispatchEvent(new Event('change'));
                }
            });
        });

        // Initialize
        updateStepUI();
    </script>
</body>
</html>
