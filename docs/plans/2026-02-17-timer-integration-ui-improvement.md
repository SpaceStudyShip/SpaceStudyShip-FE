# 타이머-할 일 연동 UI 전반 개선

**날짜:** 2026-02-17
**이슈:** #27
**브랜치:** `20260217_#27_타이머_할_일_연동_UI_전반_개선`

## 문제

현재 타이머 화면에서 할 일을 연동하면 타이머 링 위에 연동 칩 뱃지가 삽입되어 타이머 전체가 아래로 밀리는 레이아웃 문제가 있다. Column(mainAxisAlignment: center) 구조에서 요소가 추가되면 전체 중앙 정렬이 재계산되기 때문이다.

또한 바텀시트의 할 일 항목 정보가 부족하고, 타이머 종료 후 결과 피드백이 없다.

## 디자인 결정

**접근 방식:** 링 내부 통합 (접근 A)
- 연동 정보를 타이머 링 내부 상태 텍스트 자리에 표시
- 타이머 위치 항상 고정, 레이아웃 밀림 완전 해결

## 변경 사항

### 1. 타이머 링 내부 연동 표시

**파일:** `timer_screen.dart`

기존 타이머 위의 연동 칩 뱃지(59~95행) 완전 제거. 링 내부 상태 텍스트(129~138행) 영역을 조건부로 변경:

| 상태 | 연동 없음 | 연동 있음 |
|------|----------|----------|
| idle | `'집중 시간을 측정해보세요'` | (해당 없음) |
| running | `'집중 중...'` | `[🔗] 할 일 제목` (primary 색상) |
| paused | `'일시정지'` | `[🔗] 할 일 제목` (textSecondary 색상) |

- 링크 아이콘(Icons.link_rounded) + 할 일 제목을 Row로 표시
- 제목이 길면 TextOverflow.ellipsis 처리
- FittedBox 내 ConstrainedBox로 영역 제한

### 2. 바텀시트 할 일 항목 정보 강화

**파일:** `todo_select_bottom_sheet.dart`의 `_TodoSelectTile`

기존 1행(제목 + 시간) 구조에서 2행 구조로 변경:

```
┌─────────────────────────────────┐
│ ○  수학 과제                     │
│    📚 학교  ·  예상 60분  ·  45분 │
└─────────────────────────────────┘
```

- 1행: 라디오 아이콘 + 할 일 제목 (기존 유지, 우측 시간 제거)
- 2행 추가: 카테고리(있으면) + 예상 시간(있으면) + 누적 실제 시간(있으면)
- 각 정보는 `·` 구분자로 연결
- 2행: textTertiary 색상, tag_12 스타일
- TodoEntity 필드 활용: category, estimatedMinutes, actualMinutes

### 3. 타이머 종료 결과 다이얼로그

**파일:** `timer_screen.dart` (stop 로직에 다이얼로그 추가)

타이머 종료 시 AppDialog 기반 결과 요약 표시:

```
┌─────────────────────────────┐
│        🎉 수고했어요!         │
│                             │
│    이번 세션    00:45:32     │
│    ─────────────────────    │
│    연동 할 일   수학 과제     │
│    누적 시간    1시간 30분    │
│                             │
│        [ 확인 ]              │
└─────────────────────────────┘
```

- 연동 없이 타이머 사용 시: 이번 세션 시간만 표시
- 연동 있는 경우: 연동 할 일 제목 + 누적 시간 함께 표시
- 세션 시간 1분 미만이면 다이얼로그 생략
- AppDialog 기반 구현

## 영향 범위

- `timer_screen.dart` — 연동 표시 이동, 종료 다이얼로그 추가
- `todo_select_bottom_sheet.dart` — _TodoSelectTile 정보 강화
- `timer_provider.dart` — stop()에서 결과 데이터 반환 필요할 수 있음
